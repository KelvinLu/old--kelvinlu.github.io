var idlegif={_options:{gifSearch:"adventure+time",giphyApiUrl:"http://api.giphy.com/v1/gifs/search",apiKey:"dc6zaTOxFJmzC",idleTime:1e3,idleTime_ms:1e3,color:"black",transition:"0.5s"},_gifUrls:[],_active:false,_gifReady:false,_timeout:null,init:function(){this.createIdleGif();this.doGiphyApiRequest();this.startTimeout()},options:function(e){for(var t in e)if(e.hasOwnProperty(t))this._options[t]=e[t]},setGifSearch:function(e){this._options.gifSearch=e},setIdleTime:function(){this._options.gifSearch=term},createIdleGif:function(){container=document.createElement("div");container.setAttribute("class","idlegif-container");container.style.cssText="position: fixed; left: 0px; top: 0px; width: 100%; height: 100%; opacity: 0; pointer-events: none; z-index: 2147483647";container.style.setProperty("-webkit-Transition","opacity "+this._options.transition);container.style.transition="opacity "+this._options.transition;container.style.backgroundColor=this._options.color;image=document.createElement("img");image.setAttribute("class","idlegif-image");image.style.cssText="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%;";footer=document.createElement("span");footer.setAttribute("class","idlegif-footer");footer.style.cssText="position: absolute; left: 0px; bottom: 0px; padding: 0.2em; opacity: 0.5; background-color: black; color: white;";footer.innerHTML='<a target="_blank" href="https://github.com/KelvinLu/idlegif.js" style="color: white; text-decoration: none;">idlegif.js | made with &#9829; & &#9749;</a> | <a target="_blank" href="http://giphy.com/" style="color: white; text-decoration: none;">powered by Giphy</a>';document.body.appendChild(container);container.appendChild(image);container.appendChild(footer);this.container=container;this.image=image;this.bindEvent(image,"click",this.hideIdlegifAndRestartTimeout)},doGiphyApiRequest:function(){var e=new XMLHttpRequest;ajaxUrl=this._options.giphyApiUrl+"?"+"q="+this._options.gifSearch+"&"+"api_key="+this._options.apiKey;e.onreadystatechange=function(){if(e.readyState==4&&e.status==200)idlegif.digestGiphyApiResponse(e.responseText)};e.open("GET",ajaxUrl,true);e.send()},digestGiphyApiResponse:function(e){responseObj=JSON.parse(e);if(gifObjs=responseObj.data)this._gifUrls=[];for(var t=gifObjs.length-1;t>=0;t--){if(gifId=gifObjs[t].id){this._gifUrls.push("https://media.giphy.com/media/"+gifId+"/giphy.gif")}}},chooseRandomGif:function(){if(!(gifUrl=idlegif._gifUrls[Math.floor(idlegif._gifUrls.length*Math.random())])){console.log("No GIF urls were present: "+idlegif._gifUrls);return}idlegif._gifReady=false;idlegif.image.setAttribute("src",gifUrl);idlegif.bindEvent(idlegif.image,"load",function(){idlegif._gifReady=true;console.log("idlegif.js: new GIF loaded")});console.log("idlegif.js: new GIF chosen")},showNewIdleGif:function(){console.log("idlegif.js: idle time reached");idlegif.chooseRandomGif();idlegif.showIdleGifIfReady()},showIdleGifIfReady:function(){if(idlegif._gifReady)idlegif.showIdleGif();else setTimeout(idlegif.showIdleGifIfReady,20)},showIdleGif:function(){idlegif.container.style.opacity=1;idlegif.container.style.pointerEvents="auto";idlegif._active=true;console.log("idlegif.js: showing idlegif.js")},hideIdleGif:function(){idlegif.container.style.opacity=0;idlegif.container.style.pointerEvents="none";idlegif._active=false;idlegif.restartTimeout();console.log("idlegif.js: hiding idlegif.js")},startTimeout:function(){idleTime=this._options.idleTime;if(typeof idleTime=="number")this._options.idleTime_ms=idleTime;else if(idleTime.slice(-2)=="ms")this._options.idleTime_ms=parseInt(idleTime.slice(0,-2));else if(idleTime.slice(-1)=="s")this._options.idleTime_ms=parseInt(idleTime.slice(0,-1))*1e3;this._timeout=setTimeout(this.showNewIdleGif,this._options.idleTime_ms);this.bindEvent(document,"mousemove",this.restartTimeoutIfNotActive);this.bindEvent(document,"scroll",this.hideIdlegifAndRestartTimeout);this.bindEvent(document,"mousewheel",this.hideIdlegifAndRestartTimeout);this.bindEvent(document,"keypress",this.hideIdlegifAndRestartTimeout)},restartTimeoutIfNotActive:function(){if(!idlegif._active)idlegif.restartTimeout()},hideIdlegifAndRestartTimeout:function(){if(idlegif._active)idlegif.hideIdleGif();idlegif.restartTimeout()},restartTimeout:function(){clearTimeout(idlegif._timeout);idlegif._timeout=setTimeout(idlegif.showNewIdleGif,idlegif._options.idleTime_ms)},bindEvent:function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,false);else e.attachEvent("on"+t,n)}}